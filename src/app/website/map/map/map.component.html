<div>
    <nav>
        <app-map-header></app-map-header>
    </nav>
    <nav>
        <app-map-menu></app-map-menu>
    </nav>
    <div class="map-top">
        <app-left-header class="left-head" [mainMap]="map" (openPassportRequested)="openPassport($event.type, $event.data)"></app-left-header>
        <div class="container">
            <header>
                <div class="tooltip-container" (click)="zoomIn()">
                    <svg style="margin-left: 5px" width="25" height="25" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_1350_1592)">
                        <path d="M19.2996 20.0002C19.1196 20.0002 18.9396 19.9302 18.8096 19.8002L16.9496 17.9402C16.6796 17.6702 16.6796 17.2302 16.9496 16.9502C17.2196 16.6802 17.6596 16.6802 17.9396 16.9502L19.7996 18.8102C20.0696 19.0802 20.0696 19.5202 19.7996 19.8002C19.6596 19.9302 19.4796 20.0002 19.2996 20.0002Z" fill="#182026"/>
                        <path d="M9.5 0C4.26 0 0 4.26 0 9.5C0 14.74 4.26 19 9.5 19C14.74 19 19 14.74 19 9.5C19 4.26 14.74 0 9.5 0ZM12.2 10.45H10.45V12.2C10.45 12.61 10.11 12.95 9.7 12.95C9.29 12.95 8.95 12.61 8.95 12.2V10.45H7.2C6.79 10.45 6.45 10.11 6.45 9.7C6.45 9.29 6.79 8.95 7.2 8.95H8.95V7.2C8.95 6.79 9.29 6.45 9.7 6.45C10.11 6.45 10.45 6.79 10.45 7.2V8.95H12.2C12.61 8.95 12.95 9.29 12.95 9.7C12.95 10.11 12.61 10.45 12.2 10.45Z" fill="#182026"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_1350_1592">
                        <rect width="20" height="20" fill="white"/>
                        </clipPath>
                        </defs>
                    </svg>
                    <div class="tooltip" style="left: 115%;">Приблизить</div>
                </div>

                <div class="tooltip-container" (click)="zoomOut()">
                    <svg width="25" height="25" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_1350_1548)">
                        <path d="M19.3005 20.0002C19.1205 20.0002 18.9405 19.9302 18.8105 19.8002L16.9505 17.9402C16.6805 17.6702 16.6805 17.2302 16.9505 16.9502C17.2205 16.6802 17.6605 16.6802 17.9405 16.9502L19.8005 18.8102C20.0705 19.0802 20.0705 19.5202 19.8005 19.8002C19.6605 19.9302 19.4805 20.0002 19.3005 20.0002Z" fill="#182026"/>
                        <path d="M9.5 0C4.26 0 0 4.26 0 9.5C0 14.74 4.26 19 9.5 19C14.74 19 19 14.74 19 9.5C19 4.26 14.74 0 9.5 0ZM12 10.45H7C6.59 10.45 6.25 10.11 6.25 9.7C6.25 9.29 6.59 8.95 7 8.95H12C12.41 8.95 12.75 9.29 12.75 9.7C12.75 10.11 12.41 10.45 12 10.45Z" fill="#182026"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_1350_1548">
                        <rect width="20" height="20" fill="white"/>
                        </clipPath>
                        </defs>
                    </svg>
                    <div class="tooltip">Отдалить</div>
                </div>

                <div class="tooltip-container">
                    <svg
                        width="25"
                        height="25"
                        viewBox="0 0 20 20"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        (click)="selectTool('well')"
                        [class.active]="selectedTool === 'well'"
                    >
                        <path
                            d="M12.6971 0.244019V4.04785H12.4599C12.3297 4.04785 12.2227 4.1579 12.2227 4.29187V4.90909C11.5064 4.94737 10.7576 4.96172 9.99944 4.96172C8.08316 4.96172 6.26456 4.84689 4.87386 4.63636C3.09246 4.36842 2.75758 4.0622 2.70642 3.99522C2.75758 3.92823 3.09246 3.62201 4.87386 3.35407C6.26456 3.14354 8.08781 3.02871 9.99944 3.02871C10.7576 3.02871 11.5064 3.04785 12.2227 3.08134V2.5933C11.5018 2.55981 10.7576 2.54067 9.99944 2.54067C7.97153 2.54067 6.06921 2.66986 4.632 2.89952C2.49712 3.24402 2.2227 3.66507 2.2227 4C2.2227 4.33014 2.49712 4.75598 4.632 5.09569C6.06921 5.32536 7.97619 5.45455 9.99944 5.45455C10.7576 5.45455 11.5064 5.43541 12.2227 5.40191V5.86124C11.5018 5.91388 10.7529 5.9378 9.99944 5.9378C7.75293 5.9378 5.6413 5.71292 4.05991 5.30622C3.39944 5.13397 2.90177 4.95215 2.54363 4.77034C2.53432 4.76555 2.52502 4.76077 2.51107 4.75598C1.97153 4.47847 1.75293 4.20574 1.75293 4C1.75293 3.6555 2.35758 3.12919 4.05991 2.69378C5.6413 2.2823 7.75293 2.05742 9.99944 2.05742C10.7529 2.05742 11.5018 2.08134 12.2227 2.13397V0.244019C12.2227 0.110048 12.3297 0 12.4599 0C12.5901 0 12.6971 0.110048 12.6971 0.244019Z"
                            fill="#182026"
                        />
                        <path
                            d="M18.2469 3.99522C18.2469 4.20096 18.0236 4.47847 17.4655 4.76077C17.219 4.88517 16.9073 5.01435 16.5259 5.13397V4.85167C17.3911 4.62201 17.7818 4.35407 17.7818 3.99043C17.7818 3.62679 17.3911 3.35885 16.5259 3.12919V3.63158C17.1166 3.79904 17.2655 3.94258 17.298 3.98565C17.2655 4.02871 17.112 4.17225 16.5259 4.33971V4.2823C16.5259 4.14833 16.419 4.03828 16.2887 4.03828H16.0469V0.244019C16.0469 0.110048 16.1539 0 16.2841 0C16.4143 0 16.5213 0.110048 16.5213 0.244019V2.85646C17.7864 3.25837 18.2469 3.69856 18.2469 3.99522Z"
                            fill="#182026"
                        />
                        <path
                            d="M17.3391 5.354V16.6267C17.1717 16.7703 16.8926 16.8995 16.5205 17.0191V5.64587C16.8275 5.55496 17.0973 5.45927 17.3391 5.354Z"
                            fill="#182026"
                        />
                        <path
                            d="M12.6973 4.54053H16.0461V6.44005H12.6973V4.54053Z"
                            fill="#182026"
                        />
                        <path
                            d="M12.6973 6.92334H16.0461V8.82286H12.6973V6.92334Z"
                            fill="#182026"
                        />
                        <path
                            d="M12.6973 9.31104H16.0461V11.2106H12.6973V9.31104Z"
                            fill="#182026"
                        />
                        <path
                            d="M12.6973 11.6985H16.0461V13.598H12.6973V11.6985Z"
                            fill="#182026"
                        />
                        <path
                            d="M12.6973 14.0862H16.0461V15.9857H12.6973V14.0862Z"
                            fill="#182026"
                        />
                        <path
                            d="M16.0461 16.4738V17.158C15.2042 17.3685 14.0461 17.5264 12.6973 17.6173V16.469L16.0461 16.4738Z"
                            fill="#182026"
                        />
                        <path
                            d="M18.2474 4.84194V17.0477C18.2474 17.0764 18.2381 17.1147 18.2149 17.1577C18.0847 17.4065 17.5079 17.8084 15.9451 18.1625C14.3591 18.5214 12.2474 18.7175 9.99628 18.7175C7.74512 18.7175 5.63349 18.5214 4.04744 18.1625C2.4893 17.8132 1.91256 17.4065 1.77768 17.1577C1.75442 17.1147 1.74512 17.0812 1.74512 17.0477V4.83716C1.8707 4.94242 2.01488 5.03812 2.17768 5.12424V16.7367C2.17768 16.7989 2.20093 16.8611 2.24279 16.9041C3.13581 17.8563 6.96372 18.1912 9.96837 18.1912C10.7591 18.1912 11.6056 18.1673 12.4428 18.1195H12.4521C12.466 18.1195 12.4753 18.1195 12.4893 18.1147C13.9079 18.0285 15.2893 17.8563 16.3033 17.5836C16.3265 17.5788 16.3498 17.574 16.3684 17.5644C17.0009 17.3874 17.4847 17.1673 17.7358 16.9041C17.7777 16.8563 17.8009 16.7989 17.8009 16.7367V5.12902C17.9823 5.03812 18.1265 4.94242 18.2474 4.84194Z"
                            fill="#182026"
                        />
                        <path
                            d="M20 18.3492C20 18.5501 19.414 19.0382 17.1953 19.4449C15.2791 19.8037 12.7209 19.9999 10 19.9999C7.27907 19.9999 4.72558 19.8037 2.80465 19.4497C0.586047 19.0382 0 18.5501 0 18.3492C0 18.2056 0.316279 17.8851 1.47907 17.5549C1.83256 17.9856 2.66047 18.3444 3.94884 18.6363C5.56744 18.9999 7.71628 19.2009 10 19.2009C12.2837 19.2009 14.4326 18.9999 16.0465 18.6363C17.3349 18.3444 18.1628 17.9856 18.5163 17.5549C19.6837 17.8851 20 18.2104 20 18.3492Z"
                            fill="#182026"
                        />
                        <path
                            d="M10.0007 6.42099C7.71695 6.42099 5.56346 6.19132 3.94485 5.77506C3.5216 5.66501 3.07044 5.52625 2.66113 5.354V16.6315C3.41462 17.2679 6.37741 17.7081 9.98206 17.7081C10.7681 17.7081 11.5169 17.6889 12.2286 17.6507V6.34443C11.503 6.39707 10.7542 6.42099 10.0007 6.42099ZM3.57741 15.8085C3.57741 15.9425 3.47044 16.0526 3.3402 16.0526C3.20997 16.0526 3.10299 15.9425 3.10299 15.8085V7.18176C3.10299 7.04778 3.20997 6.93774 3.3402 6.93774C3.47044 6.93774 3.57741 7.04778 3.57741 7.18176V15.8085Z"
                            fill="#182026"
                        />
                    </svg>
                    <div class="tooltip">Скважина</div>
                </div>
                
                <div class="tooltip-container">
                    <svg
                    width="25"
                    height="25"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    (click)="selectTool('pipe')"
                    [class.active]="selectedTool === 'pipe'"
                    >
                    <path
                        d="M19.375 0H16.875C16.53 0 16.25 0.28 16.25 0.625V2.86625L2.86625 16.25H0.625C0.28 16.25 0 16.53 0 16.875V19.375C0 19.72 0.28 20 0.625 20H3.125C3.47 20 3.75 19.72 3.75 19.375V17.1337L17.1337 3.75H19.375C19.72 3.75 20 3.47 20 3.125V0.625C20 0.28 19.72 0 19.375 0ZM2.5 18.75H1.25V17.5H2.5V18.75ZM18.75 2.5H17.5V1.25H18.75V2.5Z"
                        fill="#182026"
                    />
                    </svg>
                    <div class="tooltip">Труба</div>
                </div>

                <div class="tooltip-container"
                    (click)="toggleEditMode()"
                    [class.active]="editMode"
                >
                    <svg width="25" height="25" viewBox="0 0 640 640" fill="none" xmlns="http://www.w3.org/2000/svg" >
                        <path d="M502.07 1.65836C499.27 2.72502 495.137 4.85836 492.737 6.45836C487.137 10.325 438.47 58.5917 438.47 60.325C438.47 62.1917 577.404 200.992 579.27 200.992C580.07 200.992 592.337 189.125 606.604 174.592C636.604 144.325 638.737 141.125 639.537 124.325C639.937 115.658 639.537 112.192 637.137 105.658C634.337 98.1917 631.27 94.725 589.27 52.5917C537.804 0.858355 537.404 0.591689 518.47 0.0583554C511.137 -0.208311 505.404 0.458355 502.07 1.65836Z" fill="black"/>
                        <path d="M232.337 265.258C125.27 372.458 57.0036 441.925 56.0703 444.325C50.0703 460.192 12.0703 572.725 6.47027 590.992C0.870271 609.125 -0.329729 614.858 0.0702714 620.458C1.13694 633.658 10.0703 640.592 24.3369 639.258C38.4703 638.058 70.8703 627.925 143.804 601.792C167.67 593.258 189.804 585.258 193.137 584.192C198.337 582.325 223.004 558.192 374.204 407.125C470.337 310.992 549.137 231.792 549.137 230.992C549.137 229.258 410.204 90.3251 408.47 90.3251C407.67 90.3251 328.47 169.125 232.337 265.258Z" fill="black"/>
                    </svg>
                    <div class="tooltip">Редактировать</div>
                </div>
            </header>
            <div class="map-container">
                <div id="map"></div>
                <div class="passport-container">
                    <div class="passport" *ngFor="let passport of passports">
                        <app-passport
                            [objectType]="passport.type"
                            [objectData]="passport.data"
                            [objectId]="passport.id"
                            (passportClosed)="onPassportClosed($event)"
                        ></app-passport>
                    </div>
                </div>
            </div>
          
            <div 
                class="context-menu" 
                *ngIf="contextMenuVisible" 
                [style.left.px]="contextMenuPosition.x" 
                [style.top.px]="contextMenuPosition.y">
                <div (click)="openPassport(contextTarget ? contextTarget.type : null, contextTarget?.data)">Паспорт объекта</div>
                <div (click)="onDelete()">Удалить</div>
            </div>
            <div *ngIf="showDiameterDialog" class="diameter-dialog">
                <div class="dialog-content">
                    <label for="pipe-diameter">Выберите диаметр трубы (мм):</label>
                    <input id="pipe-diameter" type="number" min="1" [(ngModel)]="pipeDiameterInput" />
                    <button [disabled]="!pipeDiameterInput || pipeDiameterInput <= 0" (click)="onDiameterSelected(pipeDiameterInput!)">ОК</button>
                </div>
            </div>
        </div>
    </div>
</div>